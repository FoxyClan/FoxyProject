<section class="collection">
    <div class="container" [@popIn]>
        <div class="container-block1">
            <div class="title-block">
                <h1>FOXY</h1>
                <p>The 20,000 red pandas, each unique and generated from more than 80 possible traits.</p>
            </div>
            <div class="filter-block">
                <div class="trait-block" *ngFor="let trait of traits; let i = index">
                    <div class="trait" (click)="toggleTrait(i)">
                        <p>{{ trait }}</p>
                        <img [src]="'arrow-down.png'" [class.rotated]="isTraitOpen[i]" alt="arrow icon">
                    </div>
                    <ul *ngIf="trait === 'HEAD COVERING'" class="list-trait" [@slideIn]="isTraitOpen[i] ? 'in' : 'out'">
                        <li *ngFor="let option of traitOptionsService.headCoveringOptions">
                          <input type="checkbox" class="input-option" id="{{ option.name }}" [(ngModel)]="option.selected" (change)="filteredTokens()">
                          <label for="{{ option.name }}">{{ option.name }}</label>
                        </li>
                      </ul>
                    
                      <ul *ngIf="trait === 'MOUTH'" class="list-trait" [@slideIn]="isTraitOpen[i] ? 'in' : 'out'">
                        <li *ngFor="let option of traitOptionsService.mouthOptions">
                          <input type="checkbox" class="input-option" id="{{ option.name }}" [(ngModel)]="option.selected" (change)="filteredTokens()">
                          <label for="{{ option.name }}">{{ option.name }}</label>
                        </li>
                      </ul>

                      <ul *ngIf="trait === 'EYES'" class="list-trait" [@slideIn]="isTraitOpen[i] ? 'in' : 'out'">
                        <li *ngFor="let option of traitOptionsService.eyesOptions">
                          <input type="checkbox" class="input-option" id="{{ option.name }}" [(ngModel)]="option.selected" (change)="filteredTokens()">
                          <label for="{{ option.name }}">{{ option.name }}</label>
                        </li>
                      </ul>
                </div>
            </div>
        </div>


        <div class="container-block2" #containerBlock2>
          <div class="no-result" *ngIf="tokens.length === 0">
            <div *ngIf="isLoading" class="spinner"></div>
            <p *ngIf="!isLoading">No result</p>
          </div>
          
          <div class="block2">
            <ul class="block2-list" *ngIf="tokens.length > 0">
              <li *ngFor="let token of tokens" class="block2-li">
                <div class="block2-div">
                  <a class="block2-a">
                    <img class="block2-img" [src]="token.image" alt="" (click)="openModal(token)">
                  </a>
                  <p>#{{ token.tokenId }}</p>
                </div>
              </li>
            </ul>
          </div>
        
          <div>
            <div *ngIf="isLoading && tokenIndex >= 20" class="spinner"></div>
          </div>
          
        </div>
    </div>
</section>

<app-modal-collection *ngIf="showModal" [token]="selectedToken" (closeModalEvent)="closeModal()"></app-modal-collection>
